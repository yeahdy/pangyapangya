<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<html>
<head>
    <title>빵야빵야(屋)</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <meta name="description" content=""/>
    <meta name="keywords" content=""/>
    <link rel="stylesheet" href="/css/main.css"/>
    <style>
        p {
            margin: 0 0 1em 0;
        }

        .spotlights h5 {
            font-weight: bold;
            font-size: small;
        }

        .spotlights p {
            font-size: small;
        }

        .spotlights > article {
            padding: 1.0em 2.25em 0.5em 2.25em;
            border-style: solid;
            border-width: 1px 1px 0px 0px;
            width: 25%;
        }

        .image.fit img {
            border-radius: 4px;
        }

        h4 {
            font-weight: 700;
            font-size: large;
            color: black;
            display: inline-block;
        }

        .spotlights h5 {
            color: black;
        }


        /* header */
        .headerIcon {
            width: 40px;
            display: block;
            margin: auto;
        "
        }

        .icon.solid:before {
            font-weight: 100;
            content: none;
        }

        .spotlights h5 {
            font-weight: bold;
            font-size: small;
        }

        .spotlights p {
            font-size: small;
        }

        .headerIcon {
            width: 40px;
            display: block;
            margin: auto;
        "
        }

        .icon.solid:before {
            font-weight: 100;
            content: none;
        }

        .spotlights h5 {
            font-weight: bold;
            font-size: small;
        }

        .spotlights p {
            font-size: small;
        }

        /* 검색창 */
        .search {
            position: relative;
            text-align: center;
            width: 400px;
            margin: 0 auto;
        }

        input {
            width: 100%;
            border-radius: 20px;
            border: 1px solid #bbb;
            margin: 10px 0;
            padding: 10px 12px;
        }

        .fa-search {
            position: absolute;
            left: 90%;
            top: 35%;
            margin: 0;
        }

        form {
            margin: 0;
        }

        .headerIcon {
            width: 40px;
        }

        .icon.solid:before {
            font-weight: 100;
            content: none;
        }

        div#wrap {
            display: flex;
        }

        .spotlights h5 {
            font-weight: bold;
        }

        /* 검색창 */
        .search {
            position: relative;
            text-align: center;
            width: 400px;
            margin: 0 auto;
        }

        input {
            width: 100%;
            border-radius: 20px;
            border: 1px solid #bbb;
            margin: 10px 0;
            padding: 10px 12px;
        }

        .fa-search {
            position: absolute;
            left: 90%;
            top: 35%;
            margin: 0;
        }

        .img-warp {
            position: relative;
            display: block;
            width: 100%;
            height: auto;
        }

        .review {
            width: 252px;
            margin-left: 0;
            padding-left: 0;
            margin-top: 0;
            padding-top: 0;
            margin-bottom: 16px;
            display: block;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            overflow: hidden;
        }

        .img {
            position: relative;
            display: block;
            width: 100%;
            height: auto;
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
        }

        .img:after {
            content: '' !important;
            display: block !important;
            padding-bottom: 66.66667% !important;
        }

        .txt {
            margin-bottom: 4px;
            font-size: 12px;
            color: #999;
            display: inherit;
        }

        a {
            text-decoration: none !important;
            border-bottom: none;
            color: #333 !important;
        }

        .flexsearch {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .testSearch {
            height: 45px !important;
            width: 152px !important;

        }

        #img-view {
            width: 560px;
        }

        #img-view img {
            width: 560px;
            height: auto;
            overflow: hidden;
        }

        input[type="text"]:focus {
            outline: none;
            box-shadow: none;
            border: 1px solid #f9a825 !important;
        }

        .searchButton {
            background-color: #f9a825 !important;
            box-shadow: none;
            width: 14%;
            border-radius: 0 !important;
            height: 45px !important;
            display: flex !important;
            justify-content: space-evenly !important;
            color: black !important;
        }

        #bannerDiv {
            position: fixed;
            top: 86.66px;
            z-index: 999;
            left: 12%;
        }

        .warpdiv {
            display: flex;
            align-items: center;
            justify-content: flex-end;
        }

        #review-img {
            width: 560px;
            text-align: center;
        }

        #review-img img {
            width: 560px;
            height: auto;
            overflow: hidden;
        }

        .payment {
            position: fixed;
            background-color: white;
            width: 400px;
            height: 400px;
            padding: 17px;
            border: solid 1px #0000001a;
            box-shadow: 0 2px 4px 0 #0000001a;
            z-index: 999;
            margin-left: 50%;
        }

        .price-detail {
            font-size: large;
            height: 320px;
            margin-bottom: 20px;
        }

        .price-detail strong {
            font-size: xx-large;
        }

        .bread-name {
            margin-bottom: 12px;
            color: black;
            font-weight: bold;
        }

        .bread-name {
            margin-bottom: 12px;
            color: black;
            font-weight: bold;
        }

        .pxorm {
            display: inline-block;
            vertical-align: top;
            max-width: 80%;
            font-size: small;
            color: #666;
        }

        #store-img {
            display: inline-block;
            vertical-align: top;
            font-size: 0;
            width: 24px;
            height: 24px;
            -webkit-border-radius: 50%;
            -moz-border-radius: 50%;
            border-radius: 50%;
            margin-right: 6px;
            -webkit-background-size: cover;
        }

        #store-name {
            margin-top: 2px;
            display: inline-block;
            vertical-align: top;
            max-width: 80%;
            font-size: 14px;
            color: #666;
        }

        .spanxorm {
            margin-top: 2px;
            display: inline-block;
            vertical-align: top;
            max-width: 80%;
            font-size: 14px;
            color: #666;
        }

        /*        #store-icon{
                    color: #999;
                    font-size: 12px;
                    margin-bottom: 2px;
                    margin-left: -4px;
                    display: inline-block;
                    vertical-align: middle;
                }*/

        .maker-card {
            display: flex;
            align-items: center;
            width: 100%;
        }
    </style>
</head>
<body class="is-preload" style="padding: 200px; padding-top: 86.66px;">

<!-- ----------------------------------------------------------------------------------------------------Header---------------------------------------------------------------------------------- -->
<header id="header" th:include="/main/header::header_body">

</header>

<div class="payment" style="margin-top: 2%;" th:object="${item}">
    <div class="maker-card">
        <a href="#">
            <div id="store-img" th:style="'background-image:url(' + *{testingPhoto} + ');'"></div>
            <span id="store-name" th:text="*{shopName}">형진 빵집</span>
        </a>
    </div>
    <h2 style="margin-top: 0.3em; margin-bottom: 0px" th:text="*{breadName}"></h2>
    <hr style="margin: 1em 0;">
    <div class="maker-card">
        <span class="pxorm">모집 인원</span>
    </div>
    <p style="margin-bottom: 12px; color: black; font-size: 20px;" th:text="*{people} + '명'"></p>
    <div class="maker-card">
        <span class="pxorm">신청 기간</span>
    </div>
    <p style="margin-bottom: 12px; color: black; font-size: 20px;" th:text=" *{startDate} + ' ~ ' + *{endDate}"></p>
    <div class="maker-card">
        <span class="pxorm">배송비</span>
    </div>
    <p style="margin-bottom: 12px; color: black; font-size: 20px;">무료</p>
    <div style="text-align: center;">
        <button style="background-color: #F9A825;" onclick="checkRequest()"><span style="color: white;">빵 체험단 신청하기</span></button>
    </div>
</div>
<!-- ----------------------------------------------------------------------------------------------------Header---------------------------------------------------------------------------------- -->

<!-- -----------------------------------------------------------------------------------------------------section----------------------------------------------------------------------------------- -->
<div class="wrapper">
    <!-- Main -->
    <section class="main" style="padding-top: 3%">
        <!-- Blurb -->
        <div>
            <div>
                <section id="banner" style="width: 560px; height: 560px; margin: 0 auto; margin-left: 16%;">
                    <article data-position="bottom right" th:object="${item}">
                        <div class="inner">
                            <img th:src="*{testingPhoto}" alt="메인빵">
                        </div>
                    </article>
                    <th:block th:each="img : ${imgs}">
                        <article data-position="bottom right" th:object="${img}">
                            <div class="inner">
                                <img th:src="*{img}" alt="메인빵">
                            </div>
                        </article>
                    </th:block>
                </section>
            </div>
            <div>
                <section style="text-align: center; width: 560px; margin-left: 16%">
                    <hr>
                    <div style="padding: 24px;margin-bottom: 24px;">
                        <div style="margin-bottom: 24px;">
                            <p>평균 1일, 최대 3일 이내 배송 시작</p>
                        </div>
                        <div>
                            <!-- 당일 -->
                            <div style="margin: 8px 0; width: 100%; display: flex; flex-shrink: 1; justify-content: center; align-items: center;">
                                <div style="text-align: left; width: 55px; flex-shrink: 0; font-size: 12px; line-height: 1.5; color: #666666;">
                                    당일
                                </div>
                                <div style="flex-grow: 1;">
                                    <div style="position: relative; width: 100%; height: 6px; border-radius: 3px; background-color: #f5f5f5;">
                                        <div style="width: 21%; background-color: #acacac; position: absolute; top: 0; left: 0; height: 6px; border-radius: 3px; min-width: 6px;">

                                        </div>
                                    </div>
                                </div>
                                <div style="text-align: right; width: 40px; font-size: 12px; line-height: 1.5; color: #666666; flex-shrink: 0;">
                                    21%
                                </div>
                            </div>

                            <!-- 1일 -->
                            <div style="margin: 8px 0; width: 100%; display: flex; flex-shrink: 1; justify-content: center; align-items: center;">
                                <div style="text-align: left; width: 55px; flex-shrink: 0; font-size: 12px; line-height: 1.5; color: #ff7b30;">
                                    1일
                                </div>
                                <div style="flex-grow: 1;">
                                    <div style="position: relative; width: 100%; height: 6px; border-radius: 3px; background-color:  #f5f5f5;">
                                        <div style="width: 53%;     background-color: #ff7b30; position: absolute; top: 0; left: 0; height: 6px; border-radius: 3px; min-width: 6px;">

                                        </div>
                                    </div>
                                </div>
                                <div style="text-align: right; width: 40px; font-size: 12px; line-height: 1.5; color: #ff7b30; flex-shrink: 0;">
                                    53%
                                </div>
                            </div>
                            <div style="margin: 8px 0; width: 100%; display: flex; flex-shrink: 1; justify-content: center; align-items: center;">
                                <div style="text-align: left; width: 55px; flex-shrink: 0; font-size: 12px; line-height: 1.5; color: #666666;">
                                    2일
                                </div>
                                <div style="flex-grow: 1;">
                                    <div style="position: relative; width: 100%; height: 6px; border-radius: 3px; background-color: #f5f5f5;">
                                        <div style="width: 26%;     background-color: #acacac; position: absolute; top: 0; left: 0; height: 6px; border-radius: 3px; min-width: 6px;">

                                        </div>
                                    </div>

                                </div>
                                <div style="text-align: right; width: 40px; font-size: 12px; line-height: 1.5; color: #666666; flex-shrink: 0;">
                                    26%
                                </div>
                            </div>
                            <div style="margin: 8px 0; width: 100%; display: flex; flex-shrink: 1; justify-content: center; align-items: center;">
                                <div style="text-align: left; width: 55px; flex-shrink: 0; font-size: 12px; line-height: 1.5; color: #666666;">
                                    3일
                                </div>
                                <div style="flex-grow: 1;">
                                    <div style="position: relative; width: 100%; height: 6px; border-radius: 3px; background-color: #f5f5f5;">
                                    </div>

                                </div>
                                <div style="text-align: right; width: 40px; font-size: 12px; line-height: 1.5; color: #666666; flex-shrink: 0;">
                                    0%
                                </div>
                            </div>
                            <div style="margin: 8px 0; width: 100%; display: flex; flex-shrink: 1; justify-content: center; align-items: center;">
                                <div style="text-align: left; width: 55px; flex-shrink: 0; font-size: 12px; line-height: 1.5; color: #666666;">
                                    4일 이상
                                </div>
                                <div style="flex-grow: 1;">
                                    <div style="position: relative; width: 100%; height: 6px; border-radius: 3px; background-color: #f5f5f5;">
                                    </div>
                                </div>
                                <div style="text-align: right; width: 40px; font-size: 12px; line-height: 1.5; color: #666666; flex-shrink: 0;">
                                    0%
                                </div>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 12px; font-size: 12px; line-height: 1.5; color: #999999;">
                            최근 3개월 주문의 배송준비 기간 (주말, 공휴일 제외)
                        </div>
                    </div>
                    <hr>
                    <div style="margin-top: 24px; padding: 24px 0; width: 100%; -webkit-border-radius: 4px; -moz-border-radius: 4px; border-radius: 4px; background-color: #e2fae666;">
                        <span>소중한 리뷰를 <strong>꼭!</strong> 작성 해주세요<br></span>
                        <span>사장님들에게 <strong>큰</strong> 도움이 됩니다</span>
                    </div>
                    <br>
                    <pre th:text="${item.description}">
                    </pre>
                </section>
            </div>
        </div>
    </section>
</div>


<!-- ----------------------------------------------------------------------------------------------Footer-------------------------------------------------------------------------------------------------------------------------- -->
<!-- Footer -->
<footer id="footer" th:include="/main/footer::footer_body"></footer>
<form name="requestData" id="requestData" method="post">
    <input type="hidden" name="userId" id="userId" value=""/>
    <input type="hidden" name="tno" id="tno" value="" />
</form>

<!-- Scripts -->
<script src="https://kit.fontawesome.com/8eb5905426.js" crossorigin="anonymous"></script>
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.dropotron.min.js"></script>
<script src="/js/browser.min.js"></script>
<script src="/js/breakpoints.min.js"></script>
<script src="/js/util.js"></script>
<script src="/js/main.js"></script>
<script th:replace="/main/header::header_js"></script>
</body>
<script th:inline="javascript">
    let userId = $('#sessionU').val();
    let tno = [[ ${item.tno} ]];
    $('input[name=tno]').attr('value',tno);
    $('input[name=userId]').attr('value',userId);
    
    function check(info, callback, error){
        console.log("add reply..........");
        $.ajax({
            url:"/testrest/check",
            type:"post",
            data:JSON.stringify(info), // 전달할 JSON데이터에서 문자열처리가 필요한 것들(key, date)을 자동으로 처리해준다.
            contentType:"application/json; charset=utf-8",
            success:function(result, status, xhr){
                if(callback){
                    //외부에서 전달받은 값이 있다면 결과를 해당 함수의 매개변수로 전달하여 사용한다.
                    callback(result);
                }
            },
            error:function(xhr, status, err){
                if(error){
                    error(err);
                }
            }
        });
    }

    function goRequest() {
        var name = "request";
        var option = "width=500, height=380, top=150, left=600";

        window.open("", name, option) ;

        var requestData = document.requestData;
        requestData.target = name;
        requestData.action = "/test/request";
        requestData.submit();

    }

    function checkRequest() {
        if($('#sessionU').val() != null){
            check({userId:userId, tno:tno},
                function(result){
                    if(result=='pass'){
                        goRequest();
                        return;
                    }
                    alert(result);
                }
            );
        }else if ($('#sessionC').val() != null){
            alert("일반회원만 신청할 수 있습니다.");
        }else {
            alert("로그인 후 이용해 주세요.");
            location.href = "/user/login";
        }
    }

</script>
</html>