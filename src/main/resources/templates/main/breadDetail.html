<!DOCTYPE HTML>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<html>
<head>
    <title>상세 페이지 | 빵야빵야</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <link rel="stylesheet" href="/css/main.css" />
    <link rel="icon" type="image/png"  href="/images/favicon.png"/>
    <script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
    <script>
        Kakao.init('\t1684470bd21372989a87876d9f3a3b27');
        Kakao.isInitialized();
    </script>
    <style>
        .wrapper{
            width: 700px;
            position: relative;
        }
        ul{
            list-style:none;
        }
        #rightHeader h2{color: #716ff7; font-size: 1.2em; font-weight: 900;}
        #explain p{font-size: 0.8em; background: aliceblue; height: 57px; padding: 20px 10px; box-shadow: 0 2px 4px 0 #0000001a;}
        #side{
            background: none;
            width: 480px;
            height: 10px;
            margin-left: 10px;
        }
        #info{
        }
        .payment{
            position: fixed;
            background-color: white;
            width: 400px;
            height: 420px;
            padding: 17px;
            border: solid 1px #0000001a;
            box-shadow: 0 2px 4px 0 #0000001a;
        }
        #img-section{
            padding: 36px 0px;
            width: 560px;
        }
        #img-view{
            width: 560px;
            height: 560px;
        }
        #img-view img{
            width: 560px;
            height: auto;
            overflow: hidden;
        }
        #product-info{
            width: 560px;
            display: flex;
            justify-content: center;
            margin: 0px 0px;;
        }

        #product-info pre{
            margin: 30px 0 0 0;
            text-align: center
        }

        #box{
            position: relative;
            top: 36px;
            right: -590px;
            padding: 0 !important;
            box-shadow: none !important;
            border: none !important;
        }
        .payment a{
            font-size: large;
        }
        .maker-card{
            display: flex;
            align-items: center;
            width: 100%;
            margin-bottom: 5px;
        }
        .maker-card a{
            font-size: unset;
            color: #888888;
            border-bottom : none;
        }

        .bread-name{
            overflow: hidden;
            height: 72px;
            margin-bottom: 12px;
            color: black;
            font-size: xx-large;
        }
        .price-detail{
            font-size: large;
            height: 165px;
            margin-bottom: 15px;
        }

        .price-detail del{
            font-size: x-large;
        }

        .price-detail strong{
            font-size: xx-large;
            color: #ff7b30;
        }
        #delivery tr{
            background-color: white;
            border-color: white;
        }
        .td1{
            text-align: left;
            font-size: medium;
            width: 93px;
            padding: 0.2em 0em;
        }

        .td2{
            text-align: left;
            font-size: medium;
            padding: 0.2em 0em;
        }

        .headerIcon{
            width: 40px;
            display: block;
            margin: auto;"
        }
        .icon.solid:before {
            font-weight: 100;
            content: none;
        }

        .spotlights h5{
            font-weight: bold;
            font-size: small;
        }

        .spotlights p{
            font-size: small;
        }

        .inner{
            background-color: white;
            width: 990px;
            margin: -90px auto;
            position: relative;
        }

        /* 검색창 */
        .search {
            position: relative;
            text-align: center;
            width: 400px;
            margin: 0 auto;
        }
        input {
            width: 100%;
            border-radius: 20px;
            border: 1px solid #bbb;
            margin: 10px 0;
            padding: 10px 12px;
        }
        .fa-search {
            position: absolute;
            left: 90%;
            top: 35%;
            margin: 0;
        }
        form {
            margin: 0;
        }
        .spotlights h5{
            font-weight: bold;
            font-size: small;
        }

        .spotlights p{
            font-size: small;
        }
        /* 갤러리 */
        .spotlights > article {
            padding: 1.0em 2.25em 0.5em 2.25em;
            border-style: solid;
            border-width: 1px 1px 0px 0px;
            width: 25%;
        }
        #discount{
            font-size: xx-large;
            color: #ff7b30;
            margin-bottom: -15px;
        }
        .star-avg{
            height: 25px;
        }
        fieldset{
            display: flex;
            justify-content: space-evenly;
        }
        #kakao-pay{
            width: 100px;
            height: 40px;
            position: relative;
            left: -26px;
            top: 0.3rem;
        }
        #review-title{
            width: 560px;
            color: black;
            font-size: x-large;
            font-weight: bold;
            padding-top: 64px;
            padding-left: 10px;
            border-bottom: 1px solid #d9d9d9;
        }
        #prd-info{
            text-align: center;
            width: 560px;
        }
        #prd-review{
            width: 560px;
        }
        .review-header{
            width: 560px;
            height: 32px;
            display: flex;
            justify-content: space-between;
            padding-left: 7px;
        }
        .reviewer-info{
            width: 150px;
            color: #3b3b3b;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .review-box{
            display: block;
            padding: 9px 5px;
            border-bottom: 1px solid #cccccc;
        }
        .star-one{
            font-size: 12px;
            color: #F9C827;
        }
        .reviewer{
            color: black;
            font-size: 13px;
            margin-bottom: -6px;
        }
        .review-date{
            color: #5a5a5a;
            font-size: 11px;
        }
        .star-one{
            height: 15px;
        }
        .review-body{
            display: flex;
            margin-bottom: 11px;
        }
        /*.review-img{
            height: 128px;
            width: 128px;
            object-fit: cover;
            flex: none;
        }*/
        .review-text{
            color: #5a5a5a;
            margin-left: 5px;
            font-size: smaller;
        }
        ul{
            padding-left: 0em;
        }
        p{
            margin: -3px 0px -3px 0px;
            color: black;
        }
        .kakao{
            display: flex;
            justify-content: center;
            align-items: center
        }
        fieldset button{
            border-radius: 5px;
        }
    </style>
</head>
<body class="is-preload" style="padding: 10em 200px 0 200px; background-color: white;">

<header id="header" th:include="/main/header::header_body">

</header>

<!-- Wrapper -->

<div class="inner">
    <th:block class="field" th:object="${info}">
        <div>
            <div id="info">
                <!-- 구매창 -->
                <aside id="box">
                    <div class="payment">
                        <div class="maker-card">
                            <input type="hidden">
                            <a href="#" th:text="*{shopName}"></a>
                        </div>
                        <h2 class="bread-name" th:text="*{title}"></h2>
                        <span>
                                <img class="star-avg" src="/images/cookie_star.png"/>
                                <img class="star-avg" src="/images/cookie_star.png"/>
                                <img class="star-avg" src="/images/cookie_star.png"/>
                                <img class="star-avg" src="/images/cookie_star.png"/>
                                <img class="star-avg" src="/images/cookie_unstar.png"/>
                            </span>
                        <div class="price-detail">
                            <div>
                                <p id="discount">10%</p>
                                <span><del th:text="*{breadPrice}"></del><strong>18000</strong></span>
                                원
                            </div>
                            <div>
                                <table id="delivery">
                                    <tr>
                                        <td class="td1">배송비</td>
                                        <td class="td2">3000원</td>
                                    </tr>
                                    <tr>
                                        <td class="td1">배송 시작</td>
                                        <td class="td2">평균 1일, 최대 5일 이내</td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <fieldset><!---->
                            <form>
                                <button type="button" onclick="addCart()">
                                    장바구니
                                </button>
                            </form>
                            <form>
                                <button type="button" class="kakao" id="kakaoBtn" onclick="kakaoPay()" style="overflow: hidden; width: 100px; background-color: #ffeb00;">
                                    <img src="/images/kakao.png">
                                </button>
                            </form>
                            <form>
                                <button type="button" onclick="buyNow()">
                                    구매
                                </button>
                            </form>
                        </fieldset>
                    </div>
                </aside>
                <section id="img-section">
                    <div id="img-view">
                        <img th:src="*{bakeryPhoto}">
                    </div>
                    <div id="product-info">
                        <pre th:text="*{content}"></pre>
                    </div>
                </section>
            </div>
        </div>
    </th:block>
    <section id="prd-info">
    </section>
    <section id="prd-review">
        <div id="review-title">
            구매 후기
        </div>
        <ul>
            <th:block th:each="reply : ${replyList}">
                <a class="review-box"><!--리뷰 상세 보기를 할 경우 링크를 담기 위한 a태그-->
                    <div th:object="${reply}">
                        <div class="review-header"><!-- th:object="${reply}"-->
                            <div class="reviewer-info">
                        <span class="reviewer" th:text="*{userid}">
                        </span>
                                <span class="review-date" th:text="*{replydate}">
                        </span>
                            </div>
                            <div class="review-star">
                        <span th:switch="*{star}">
                        <span th:case="1">
                            <img class="star-one" src="/images/cookie_star.png"/>
                            <img class="star-one" src="/images/cookie_unstar.png"/>
                            <img class="star-one" src="/images/cookie_unstar.png"/>
                            <img class="star-one" src="/images/cookie_unstar.png"/>
                            <img class="star-one" src="/images/cookie_unstar.png"/>
                        </span>
                        <span th:case="2">
                            <img class="star-one" src="/images/cookie_star.png"/>
                            <img class="star-one" src="/images/cookie_star.png"/>
                            <img class="star-one" src="/images/cookie_unstar.png"/>
                            <img class="star-one" src="/images/cookie_unstar.png"/>
                            <img class="star-one" src="/images/cookie_unstar.png"/>
                        </span>
                        <span th:case="3">
                            <img class="star-one" src="/images/cookie_star.png"/>
                            <img class="star-one" src="/images/cookie_star.png"/>
                            <img class="star-one" src="/images/cookie_star.png"/>
                            <img class="star-one" src="/images/cookie_unstar.png"/>
                            <img class="star-one" src="/images/cookie_unstar.png"/>
                        </span>
                        <span th:case="4">
                            <img class="star-one" src="/images/cookie_star.png"/>
                            <img class="star-one" src="/images/cookie_star.png"/>
                            <img class="star-one" src="/images/cookie_star.png"/>
                            <img class="star-one" src="/images/cookie_star.png"/>
                            <img class="star-one" src="/images/cookie_unstar.png"/>
                        </span>
                        <span th:case="5">
                            <img class="star-one" src="/images/cookie_star.png"/>
                            <img class="star-one" src="/images/cookie_star.png"/>
                            <img class="star-one" src="/images/cookie_star.png"/>
                            <img class="star-one" src="/images/cookie_star.png"/>
                            <img class="star-one" src="/images/cookie_star.png"/>
                        </span>
                    </span>
                            </div>
                        </div>
                        <div class="review-body">
                            <!--<img class="review-img" src="/images/bread1.jpg">-->
                            <div class="review-text" th:text="*{reply}">
                            </div>
                        </div>
                    </div>
                </a>
            </th:block>
        </ul>
    </section>
</div>
<!-- Scripts -->
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery.dropotron.min.js"></script>
<script src="/js/browser.min.js"></script>
<script src="/js/breakpoints.min.js"></script>
<script src="/js/util.js"></script>
<script src="/js/main.js"></script>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js" ></script>
<script type="text/javascript" src="https://cdn.iamport.kr/js/iamport.payment-1.1.5.js"></script>
<script th:replace="/main/header::header_js"></script>
<script th:inline="javascript">
    function addCart() {
        if($('#sessionU').val() == null && $('#sessionC').val() == null){
            alert("로그인 후 이용 가능합니다!")
        }else{

        }
    }

    function kakaoPay() {
        if($('#sessionU').val() == null && $('#sessionC').val() == null){
            alert("로그인 후 이용 가능합니다!")
        }else {
            IMP.init('imp37396046');
            // 예: imp00000000
            // IMP.request_pay(param, callback) 결제창 호출
            IMP.request_pay({ // param
                pg: "html5_inicis",
                pay_method: "card",
                merchant_uid: "ORD20211109-000033",
                name: "디디얌 마카롱 수제 뚱카",
                amount: 21000,
                amount: 23000,
                buyer_email: "gildong@gmail.com",
                buyer_name: "홍길동",
                buyer_tel: "010-4242-4242",
                buyer_addr: "서울특별시 강남구 신사동",
                buyer_postcode: "01182"
            }, function (rsp) { // callback
                if (rsp.success) { // 결제 성공 시: 결제 승인 또는 가상계좌 발급에 성공한 경우
                    var msg = '결제가 완료되었습니다.';
                    msg += '고유ID : ' + rsp.imp_uid;
                    msg += '상점 거래ID : ' + rsp.merchant_uid;
                    msg += '결제 금액 : ' + rsp.paid_amount;
                    msg += '카드 승인번호 : ' + rsp.apply_num;
                    alert("결제가 완료되었습니다.");
                } else {
                    alert("결제에 실패하였습니다. 에러 내용: " + rsp.error_msg);
                }
            });
        }
        /*$("#kakaoBtn").on("click", function(){
            window.open("", "popup_window", "width=500, height=700, scrollbars=no");
        });
    }*/
    }
    function buyNow() {
        if($('#sessionU').val() == null && $('#sessionC').val() == null){
            alert("로그인 후 이용 가능합니다!")
        }else{
            window.location.href("/main/delivery")
        }
    }

</script>

</body>
<!-- Footer -->
<!--<footer id="footer" style="background-color: #f5f5f5">
    <div class="copyright">
        &copy; Untitled. All rights reserved.
    </div>
</footer>-->
</html>